(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf5cef02","chunk-2d0bd9b7"],{"2d5d":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return r}));var i=a("d4ec"),n=a("bee2"),r=(a("d3b7"),a("b0c0"),a("ac1f"),a("1276"),a("c19f"),a("ace4"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1920;Object(i["a"])(this,e),this.file=t,this.fileSize=a,this.maxWH=n}return Object(n["a"])(e,[{key:"compress",value:function(){var e=this,t=this.file.type,a=this.file.size/1024;return new Promise((function(i){var n=new FileReader;n.readAsDataURL(e.file),n.onload=function(){var r=document.createElement("canvas"),c=document.createElement("img");c.src=n.result,c.onload=function(){var n=r.getContext("2d"),o=e.dWH(c.width,c.height,e.maxWH);r.width=o.width,r.height=o.height,n.clearRect(0,0,r.width,r.height),n.drawImage(c,0,0,r.width,r.height);var l=r.toDataURL(t,.9),s=e.fileSizeKB(l);s>e.fileSize&&console.log("图片尺寸太大!"+a+" >> "+s);var u=e.dataURLtoBlob(l,t),f=new File([u],e.file.name);i(f)}}}))}},{key:"dWH",value:function(e,t,a){var i={width:e,height:t};return Math.max(e,t)>a?e>t?(i.width=a,i.height=Math.round(t*(a/e)),i):(i.height=a,i.width=Math.round(e*(a/t)),i):i}},{key:"fileSizeKB",value:function(e){var t=0;return t=Math.round(3*e.split(",")[1].length/4/1024),t}},{key:"dataURLtoBlob",value:function(e,t){for(var a=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(a.length),r=new Uint8Array(n),c=0;c<a.length;c++)r[c]=a.charCodeAt(c);return t&&(i=t),new Blob([n],{type:i,lastModifiedDate:new Date})}}]),e}())},"4e6d":function(e,t,a){"use strict";a("ab44")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var i=a("1d80"),n=a("5899"),r="["+n+"]",c=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),l=function(e){return function(t){var a=String(i(t));return 1&e&&(a=a.replace(c,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5e11":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-upload",{staticClass:"image-uploader",attrs:{action:e.path+"/fileUploadAndDownload/upload",headers:{"x-token":e.token},"show-file-list":!1,"on-success":e.handleImageSuccess,"before-upload":e.beforeImageUpload,multiple:!1}},[e.imageUrl?a("img",{staticClass:"image",attrs:{src:e.path+e.imageUrl}}):a("i",{staticClass:"el-icon-plus image-uploader-icon"})])],1)},n=[],r=a("5530"),c=(a("a9e3"),a("5880")),o=a("2d5d"),l="/api",s={name:"upload-image",model:{prop:"imageUrl",event:"change"},props:{imageUrl:{type:String,default:""},fileSize:{type:Number,default:2048},maxWH:{type:Number,default:1920}},data:function(){return{path:l}},computed:Object(r["a"])({},Object(c["mapGetters"])("user",["userInfo","token"])),methods:{beforeImageUpload:function(e){var t=e.size/1024<this.fileSize;if(!t){var a=new o["default"](e,this.fileSize,this.maxWH);return a.compress()}return t},handleImageSuccess:function(e){var t=e.data;t.file&&this.$emit("change",t.file.url)}}},u=s,f=(a("4e6d"),a("2877")),d=Object(f["a"])(u,i,n,!1,null,"3a351af0",null);t["default"]=d.exports},a9e3:function(e,t,a){"use strict";var i=a("83ab"),n=a("da84"),r=a("94ca"),c=a("6eeb"),o=a("5135"),l=a("c6b6"),s=a("7156"),u=a("c04e"),f=a("d039"),d=a("7c73"),h=a("241c").f,p=a("06cf").f,g=a("9bf2").f,m=a("58a8").trim,b="Number",v=n[b],w=v.prototype,I=l(d(w))==b,N=function(e){var t,a,i,n,r,c,o,l,s=u(e,!1);if("string"==typeof s&&s.length>2)if(s=m(s),t=s.charCodeAt(0),43===t||45===t){if(a=s.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+s}for(r=s.slice(2),c=r.length,o=0;o<c;o++)if(l=r.charCodeAt(o),l<48||l>n)return NaN;return parseInt(r,i)}return+s};if(r(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var E,S=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof S&&(I?f((function(){w.valueOf.call(a)})):l(a)!=b)?s(new v(N(t)),a,S):N(t)},A=i?h(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),y=0;A.length>y;y++)o(v,E=A[y])&&!o(S,E)&&g(S,E,p(v,E));S.prototype=w,w.constructor=S,c(n,b,S)}},ab44:function(e,t,a){}}]);